\subsubsection{UseCases}

\renewcommand{\arraystretch}{1.9}

	

    \begin{longtable}{|p{3cm}p{14cm}|}
    \multicolumn{2}{l}{\textbf{[UC1] - EducatorLogsIn} }\\
        \hline 
         Name & EducatorLogIn \\
        \hline 
        Actors & Educator, GitHub. \\
        \hline
        Entry Condition & Educator has opened \app on his/her laptop. \\
        \hline
        Event Flow &  
        	1 - \app shows the log in interface with the button to sign in with a GitHub account.

        	2 - Educator clicks on the button to sign in using his/her GitHub account.

        	3 - \app redirects the educator to the GitHub login page.
        	
        	4 - Educator inserts his/her GitHub credentials and confirms.\\
        \hline
        Exit Condition & \app shows the initial (home) page of the application for an educator.  \\
        \hline
        Exceptions & 
        	1 - Educator inserts wrong credentials to access his/her GitHub account: the GitHub authentication page will return an error to the educator, asking him/her to retry.\\
        \hline
      
    \end{longtable}
      
	
	
	\begin{longtable}{|p{3cm}p{14cm}|}
		\multicolumn{2}{l}{\textbf{[UC2] - StudentLogsIn}}\\
		\hline
		Name & StudentLogIn \\
		\hline
		Actors & Student, GitHub. \\
		\hline
		Entry Condition & Student has opened \app on his/her laptop. \\
		\hline
		Event Flow &  
		
		1 - \app shows the log in interface with the button to sign in with a GitHub account.
		
		2 - Student clicks on the button to sign in using his/her GitHub account.
		
		3 - \app redirects the student to the GitHub login page.
		
		4 - Student inserts his/her GitHub credentials and confirms.
		\\
		\hline
		Exit Condition & \app shows the initial (home) page of the application for an student.  \\
		\hline
		Exceptions & 
		1 - Student inserts wrong credentials to access his/her GitHub account: the GitHub authentication page will return an error to the student, asking him/her to retry.\\
		\hline
    
    \end{longtable}
    
    
      \begin{longtable}{|p{3cm}p{14cm}|}
      	\multicolumn{2}{l}{\textbf{[UC3] - CreateTournament}}\\
        \hline
         Name & CreateTournament \\
        \hline
        Actors & Educator, Student. \\
        \hline
        Entry Condition & Educator is logged in the \app platform.  \\
        \hline
        Event Flow &  
        	1 - Educator clicks on the button to create a new tournament.
        	 
        	2 - \app shows the form to fill with the information for the tournament to be created.
        	
        	3 - Educator types in the name of the tournament.
        	
        	4 - Educator writes down a description of the tournament.
        	
        	5 - Educator defines the registration deadline by which students are asked to register for the tournament if interested.
        	
        	6 - Educator defines the badges (rewards) to be assigned to students at the end of the tournament based on some customary achievements.
        	
        	7 - Educator confirms the information filled in the form.
        	
        	8 - \app shows the initial page of the tournament to the educator.
        	
        	9 - \app sends a notification to all the students on the platform to inform them of the new tournament available.\\
      
        
        \hline
        Exit Condition & The new tournament is added to the list of tournaments created by the educator and all users on the platform can see the new tournament. \\
        \hline
        Exceptions &
        1 - The registration deadline set by the educator is on the same day or before the day in which the educator is trying to create the new tournament: the system does not allow the educator to confirm the creation of the tournament and reports an error message.
        
        2 - Educator confirms the form to create the new tournament leaving some mandatory information unspecified: in this case \app will return an error message to the educator stating that some information is missing and the tournament cannot be created.\\
        \hline
        Special Requirements & Mandatory data in the tournament creation form is composed of name and registration deadline of the tournament.
        \\
        \hline
      
    \end{longtable}

    
      \begin{longtable}{|p{3cm}p{14cm}|}
      	\multicolumn{2}{l}{ \textbf{[UC4] - CreateBattle}}\\
        \hline
         Name & CreateBattle \\
        \hline
        Actors & Educator, Student. \\
        \hline
        Entry Condition & Educator is logged in the \app platform and has the permissions to publish a battle in the tournament which the battle will reside in. S/he has already written the build automation scripts and test cases for the battle to be created. \\
        \hline
        Event Flow & 
        	1 - Educator clicks on the button to create a new battle from the home page of \app.
        	
        	2 - \app displays the entire list of tournaments in which the educator has permissions to publish battles.
        	
        	3 - Educator selects the tournament in which s/he wants to create the new battle.
        	
        	4 - \app shows the form to fill in with all the relevant data associated with the battle.
        	
        	5 - Educator types in the name of the battle.
        	
        	6 - Educator writes down the textual description of the battle.
        	
        	7 - Educator uploads the build automation scripts related to the battle.
        	
        	8 - Educator uploads the test cases related to the battle.
        	
        	9 - Educator sets the registration deadline for the battle, by which students are asked to join if interested.
        	
        	10 - Educator sets the submission deadline for the battle, after which \app stops accepting additional solutions to the battle.
        	
        	11 - Educator sets the minimum and maximum number of students allowed per team.
        	
        	12 - Educator selects the aspects on which \app automatically evaluates the students' code solutions, leveraging an external static analysis tool. For instance maintainability, security...
        	
        	13 - Educator specifies whether a consolidation stage for personal evaluation of the students' code solutions is required at the end of the battle.
        	
        	14 - Educator clicks on the button to confirm the data inserted in the form.
        	
        	15 - \app shows the educator the presentation page of the newly created battle.
        	
        	16 - \app sends a notification to all the students subscribed to the tournament in which the battle has been created, informing them of the new battle available.
        \\
        \hline
        Exit Condition & The new battle is added on the list of battles created by the educator and students are able to see this new battle in the tournament in which it resides. \\
        \hline
        Exceptions & 
        
        1 - The registration deadline set by the educator is on the same day or before the day in which the educator is trying to create the new battle: the system does not allow the educator to confirm the creation of the battle and reports an error message.
        
       	2 - The submission deadline set by the educator is on the same day or before the day of the registration deadline: the system does not allow the educator to confirm the creation of the tournament and reports an error message.
        
        3 - Educator confirms the creation of the battle without uploading either the build automation scripts or the test cases for the battle: the system doesn't create any new battle and reports an error message to the educator stating the reason why the battle cannot be instantiated.
        
        4 - Educator confirms the creation of the battle without specifying some mandatory information for the battle: the system doesn't create any new battle and reports an error message to the educator stating the reason why the battle cannot be instantiated.\\
        \hline
        Special Requirements & Mandatory data in the battle form include the battle's name, the textual description of the problem to be solved, the registration and submission deadlines, the minimum and maximum number of students per team.\\
         \hline
      
    \end{longtable}
      
     \begin{longtable}{|p{3cm}p{14cm}|}
     	\multicolumn{2}{l}{\textbf{[UC5] - GrantPermissions}}\\
        \hline
        Name & GrantPermissions \\
        \hline
        Actors & Educator. \\
        \hline
        Entry Condition & Educator A is logged in the system. Educator A created a tournament on the platform. \\
        \hline
        Event Flow &  
        1 - Educator A selects from the home page of \app the button to visualize the list the tournaments that s/he created.
        
        2 - \app displays the list of tournaments created by educator A.
        
        3 - Educator A clicks on the tournament in which s/he wants to grant permissions to educator B.
        
        4 - \app opens the description page of the selected tournament.
        
        5 - Educator A clicks on the button to grant the permissions to publish battles to another educator in the tournament.
        
        6 - \app displays an interface to search for an educator by username.
        
        7 - Educator A types in educator B's username, finds him/her and confirms the choice.
        
        8 - \app sends a request to educator B to inform him/her of the possibility to publish battles in A's tournament.
        
        9 - Educator B accepts the request.
        \\
        \hline
        Exit Condition & The system adds the tournament to the list of tournaments in which educator B has permissions to publish battles.\\
        \hline
        Exceptions & 
        1 - Educator A tries to grant publishing permissions to educator B who already had permissions on that tournament: \app doesn't modify anything on B's account and reports to A that B already had publishing permissions on that tournament.
        
        2 - Educator A tries to grant publishing permissions to educator B on a closed tournament: \app doesn't modify anything on B's account and reports to A the tournament is already terminated.
        \\
        \hline
      
    \end{longtable}

    
      \begin{longtable}{|p{3cm}p{14cm}|}
      	\multicolumn{2}{l}{\textbf{[UC6] - SubscribeToTournament}}\\
        \hline
        Name & SubscribeToTournament \\
        \hline
        Actors & Student. \\
        \hline
        Entry Condition & The student is logged in the system.\\
        \hline
        Event Flow &  
        1 - Student selects the option to add a new tournament from the home page of \app.
        
        2 - \app displays the list of available tournaments on the platform in the home page.
        
        3 - Student browses the list of available tournaments and reads some of their descriptions to get an idea on them.
        
        4 - Student clicks on the tournament s/he wants to subscribe to.
        
        5 - \app shows the home page of the selected tournament.
        
        6 - Student clicks on the button to subscribe to the tournament and confirms his choice.
        \\
        \hline
        Exit Condition & The system adds the tournament to the list of tournaments the student is subscribed to. \\
        \hline
        Exceptions & 
        1 - Student tries to subscribe to a tournament whose registration deadline has already passed: \app reports an error message to the student stating that it is not possible to carry out the operation.
        \\
        \hline
    \end{longtable}

   

      
     \begin{longtable}{|p{3cm}p{14cm}|}
     	\multicolumn{2}{l}{\textbf{[UC7] - JoinBattleAlone}}\\
        \hline
        Name & JoinBattleAlone \\
        \hline
        Actors & Student. \\
        \hline
        Entry Condition & The student is logged in the platform and is subscribed to the tournament in which the battle s/he wants to join resides.\\
        \hline
        Event Flow &  
        1 - Student opens the list of tournaments s/he's subscribed to from the home page of \app.
        
        2 - \app displays the list of tournaments the student is subscribed to.

        3 - Student clicks on the tournament in which the battle s/he wants to join resides.

        4 - \app shows the home page of the selected tournament.
        
        5 - Student selects the battle s/he wants to join and clicks on it.

        5 - \app shows the description page of the selected battle with the button to join it.
        
        6 - Student clicks the button to join the battle.
        
        7 - \app shows the interface to join a battle.
        
        8 - Student selects the option to participate as a single player and confirms.
        
        \\
        \hline
        Exit Condition & \app adds the battle to the list of battles the student is taking part to. \\
        \hline
        Exceptions & 
        1 - Student tries to join a battle whose registration deadline has passed: \app shows an error message stating that it is not possible to carry out that operation and doesn't allow the student to join the battle.
        
        2 - Student tries to join a battle in a tournament s/he is not subscribed to: \app doesn't allow this operation and reports a warning message stating that it is necessary to first subscribe to the tournament in order to participate to its battles.
        \\
        \hline    
    \end{longtable}

   
	
	\begin{longtable}{|p{3cm}p{14cm}|}
		\multicolumn{2}{l}{\textbf{[UC8] - JoinBattleAsTeam}}\\
		\hline
		Name & JoinBattleAsTeam \\
		\hline
		Actors & Student. \\
		\hline
		Entry Condition & Students A, B, C are logged in the platform and are all subscribed to the tournament in which the battle they want to join resides.\\
		\hline
		Event flow &  
		1 - Student A opens the list of tournaments s/he's subscribed to from the home page of \app.
		
		2 - \app displays the list of tournaments the student A is subscribed to.
		
		3 - Student A clicks on the tournament in which the battle s/he wants to join resides.
		
		4 - \app shows the home page of the selected tournament.
		
		5 - Student A selects the battle s/he wants to join and clicks on it.
		
		5 - \app shows the description page of the selected battle with the button to join it.
		
		6 - Student A clicks the button to join the battle.
		
		7 - \app shows the interface for joining a battle.
		
		8 - Students A opts for participating to the battle as a team.
		
		9 - \app shows an interface in which it is possible to type in the team's name and search for other students by username to invite them in the team.
		
		10 - Student A types in the team's name.
		
		11 - Student A types in B and C's usernames and selects them on the interface.
		
		12 - Student A confirms his/her choices.
		
		13 - \app sends a request to students B and C asking them to participate in the team created by A.
		
		\\
		\hline
		Exit condition & \app adds the battle to the list of battles in which A participates, as well as to the list of battles in which B participates and C participates. \app also creates a new team grouping A, B and C together.\\
		\hline
		Exceptions & 
		1 - Student A tries to join a battle whose registration deadline has passed: \app shows an error message stating that it is not possible to carry out that operation and doesn't allow the student to join the battle.
		
		2 - Student A tries to join a battle in a tournament s/he is not subscribed to: \app doesn't allow this operation and reports a warning message stating that it is necessary to first subscribe to the tournament in order to participate in its battles.
		
		3 - Student A tries to invite a student that is not subscribed to the tournament in which the battle resides: \app won't allow this action by limiting the search space for the students to invite to the set of students subscribed to the tournament in which the battle resides.
		
		4 - Students B or C do not accept the request to join the team before the registration deadline of the battle: \app excludes them from the battle. The request is no longer valid.
		
		\\
		\hline

\end{longtable}


    \begin{longtable}{|p{3cm}p{14cm}|}
    	\multicolumn{2}{l}{\textbf{[UC9] - CreateGitHubRepository }}\\
    
        \hline
        Name & CreateGitHubRepository \\
        \hline
        Actors & GitHub, Student. \\
      \hline 
        Entry Condition &  There is a battle on \app whose registration deadline has just passed.  \\ 
       \hline 
        Event Flow & 
        
        1 - \app sends a request to GitHub to generate a new repository dedicated to the battle whose registration deadline has just passed. 
        
        2 - GitHub creates the new repository.
        
        3 - GitHub sends back a confirmation message to \app.
        
        4 - \app sends a notification to all the students who joined the battle to inform them that the battle they're subscribed to is now open and it is possible to submit code solutions through GitHub. The system also includes the link to the remote GitHub repository in the notification message.\\
        \hline
        Exit Condition &  All students subscribed to the battle receive the notification and are able to start pushing code solutions for the ongoing battle. \\
        \hline
        Exceptions & 
        1 - GitHub doesn't respond to the request and doesn't create the new repository: \app sends again the request after waiting for a fixed time interval.
        \\
        \hline

      
    \end{longtable}

    
   \begin{longtable}{|p{3cm}p{14cm}|}
   	\multicolumn{2}{l}{\textbf{[UC10] - PushSolutionGitHub} }\\
   	\hline 
   	Name & PushSolutionGitHub \\
   	\hline 
   	Actors & Student, GitHub. \\
   	\hline
   	Entry Condition & Student is logged in the system and has already joined a battle that is ongoing (the registration deadline is passed, while the submission deadline hasn't). \\
   	\hline
   	Event Flow &  
   	1 - Student pushes a new code solution on the GitHub repository that s/he forked from the main GitHub repository dedicated to the battle.
   	
   	2 - GitHub sends a notification to \app with the information relative to the new commit performed by the student.
   	
   	3 - \app downloads the new code solution from GitHub.
   	
   	4 - \app computes the score to assign to the new code solution (see UC11).
   	
   	5 - \app shows on the platform the score assigned to the new solution.
   	
   	6 - \app updates the ranking of teams in the battle accordingly to the student's new score.\\
   	\hline
   	Exit Condition & The student is able to see on \app the score of his/her solution and the new ranking of the battle.  \\
   	\hline
   	Exceptions & -\\
   	
   	\hline
   	
   \end{longtable}
   
   \begin{longtable}{|p{3cm}p{14cm}|}
   	\multicolumn{2}{l}{\textbf{[UC11] - CalculateScore} }\\
   	\hline 
   	Name & CalculateScore \\
   	\hline 
   	Actors & StaticAnalysisTool. \\
   	\hline
   	Entry Condition & A student has just pushed a new code solution on his/her GitHub repository linked to a battle, \app has received the notification from GitHub and downloaded the code of the student to be evaluated. \\
   	\hline
   	Event Flow &  
   	1 - \app uses the build automation scripts to build the student's code solution.
   	
   	2 - \app runs the test cases on the student's solution and counts how many of them are passed.
   	
   	3 - \app calculates the time went by from the beginning of the battle to the moment in which the solution was submitted and stores the information.
   	
   	4 - \app leverages the StaticAnalysisTool to evaluate the student's solution based on some criteria (such as maintainability, security...) defined by the educator that created the battle at battle creation time.
   	
   	5 - \app calculates the total score (between 0 and 100) to assign to the student's solution based on the information gathered at points 2, 3, 4.\\
   	\hline
   	Exit Condition & \app saves the total score computed for the student's solution  \\
   	\hline
   	Exceptions & 
   	1 - The building process of the code solution fails: \app terminates the computation and assigns a score of 0 to the solution. \\
   	\hline
   	
   \end{longtable}
    
     \begin{longtable}{|p{3cm}p{14cm}|}
     	\multicolumn{2}{l}{\textbf{[UC12] - EvaluateSolutions }}\\
        \hline
        Name & EvaluateSolutions \\
        \hline
        Actors & Educator. \\
        \hline
        Entry Condition &  Educator is logged in \app. Educator has already created a battle and required a consolidation stage at the end of the battle. The submission deadline of the battle has just passed. \\
        \hline
        Event Flow &  
        1 - Educator navigates on the system to the battle for which the consolidation stage has to be carried out and clicks on the button to assess the teams' solutions.
        
        2 - \app shows an interface in which for each team participating in the battle it is possible to specify a score to assign to it. On the interface there is also a timer illustrating the maximum amount of time to complete the task.
        
        3 - Educator reads the teams' solutions one by one and inputs in the system the corresponding scores.
        
        4 - After having assessed all the solutions, the educator confirms his/her choices. 
        \\

        \hline
        Exit Condition &  \app saves the scores assigned by the educator in order to calculate the final ranking for the battle.
        \\
        \hline
        Exceptions & 
        1 - Educator closes the consolidation stage interface before having assessed all teams' solutions: \app won't publish any final ranking yet and will save the scores assigned so far by the educator.
        
        2 - Educator doesn't complete the task of assigning personal scores before the timer goes off: \app will discard all the scores assigned by the educator and will base the final ranking only on the automatic evaluations performed during the battle.
        \\
        \hline
     
    \end{longtable}
    
    
   
    
     \begin{longtable}{|p{3cm}p{14cm}|}
     	\multicolumn{2}{l}{\textbf{[UC13] - TerminateBattle}}\\
        \hline
         Name & TerminateBattle \\
        \hline
        Actors & Educator, Student. \\
        \hline
        Entry Condition & There is a battle created on \app whose submission deadline has just passed. \\
        \hline
        Event Flow &  
        1 - \app detects that the submission deadline of a battle is passed.
        
        2 - If a consolidation stage was required by the educator who created the battle, \app initiates the process to carry out the personal evaluation of the teams' solutions by the educator (see UC10).
        
        3 - \app computes the final ranking of teams for the battle, considering both the scores automatically assigned by the platform during the battle and possibly the personal scores provided by the educator (if the consolidation stage was required and successfully completed).
        
        4 - \app publishes the final ranking of the battle on the platform.

        5 - \app sends a notification to all the students participating in the battle, informing them of the availability of the final ranking for the battle.
        \\
        \hline
        Exit Condition & All students involved in the battle and the educator that created the battle are able to visualize the final ranking of the battle. 
        \\
        \hline
      
      
    \end{longtable}


		

    
  
      \begin{longtable}{|p{3cm}p{14cm}|}
      	\multicolumn{2}{l}{\textbf{[UC14] - CloseTournament} }\\
        \hline
         Name & CloseTournament \\
        \hline
        Actors & Educator, Student. \\
        \hline
        Entry Condition & Educator is logged in \app. Educator created a tournament on the platform. \\
        \hline
        Event Flow &  
        1 - Educator retrieves from the home page of the \app platform the list of tournaments that s/he created.
        
        2 - \app displays the list of tournaments the educator created.
        
        3 - Educator selects from the list the tournament that s/he wants to close.
        
        4 - \app shows the home page of the tournament.
        
        5 - Educator clicks on the button to close the tournament and confirms the choice.
        
        6 - \app sends a notification to all the students subscribed to the tournament informing them that the tournaments has been closed.
        \\
        \hline
        Exit Condition & \app removes the tournament from the list of available tournaments on the platform, so that it will no longer be displayed to the users of the application. \\
        \hline
        Exceptions & 
        1 - Educator tries to close a tournament before the registration deadline of the tournament passes: \app won't allow the action and reports an error message stating that it is not possible to close a tournament that hasn't even started yet.
        
        2 - Educator tries to close a tournament when some battles are still going on inside the tournament: \app won't allow the educator to close the tournament yet, until all battles are over. At the same time though, \app will no longer let any educator publish battles in that tournament. As soon as all the battles that are still going on are concluded, also the tournament will close automatically.
        \\
        \hline
     
      
    \end{longtable}
   
    
      \begin{longtable}{|p{3cm}p{14cm}|}
      	\multicolumn{2}{l}{\textbf{[UC15] - OpenTournamentRanking}}\\
        \hline
         Name & OpenTournamentRanking \\
        \hline
        Actors & User (Student or Educator). \\
        \hline
        Entry Condition & User is logged in the platform and there is an ongoing tournament on \app whose registration deadline is passed. \\
        \hline
        Event Flow &  
        1 - User browses the home page of \app to search for a tournament. S/he clicks on the tournament s/he wants to see the ranking of.
        
        2 - \app displays the home page of the selected tournament.
        
        3 - User clicks on the button to display the tournament's ranking.
        
        4 - \app displays the tournament's ranking.
        \\
        \hline
        Exit Condition & User is able to see the tournament's ranking on his/her screen.\\
        \hline
        Exceptions &
        1 - User attempts to see the ranking of a tournament whose registration deadline hasn't passed yet: \app doesn't allow this action simply by not providing any button on the interface to access the ranking.
        \\
        \hline
     
      
    \end{longtable}

   
    
      \begin{longtable}{|p{3cm}p{14cm}|}
      	\multicolumn{2}{l}{\textbf{[UC16] - OpenBattleRanking}}\\
        \hline
         Name & OpenBattleRanking \\
        \hline
        Actors & User (Student or Educator).  \\
        \hline
        Entry Condition & User is logged in the platform. There is at least one tournament on \app in which at least a battle has been published. The battle's registration deadline has already passed. \\
        \hline
        Event Flow &  
        1 - User selects from the home page a tournament s/he is involved in (if the user is a student, then a tournament s/he's subscribed to, if the user is an educator, a tournament in which s/he has permissions to publish battles).
        
        2 - \app shows the selected tournament's home page.
        
        3 - User selects from the tournament's home page a battle s/he's involved in (if the user is a student, then a battle s/he joined, if the user is an educator, then a battle s/he created).
        
        4 - \app shows the battle's description page.
        
        5 - User clicks on the button to see the battle's ranking.
        
        6 - \app checks if the user that is trying to access the battle's ranking is involved in the battle or not (if the user is a student, \app verifies if the student is participating in the battle, if the user is an educator, \app verifies if the educator has created the battle or not).
        
        7 - \app shows the battle's ranking if the user requesting it is involved in the battle.
        \\
        \hline
        Exit Condition & User sees the ranking on his screen. \\
        \hline
        Exceptions &
        1 - User tries to access a battle's ranking without being involved in it: \app will detect the fact that the user is not involved in the battle (with the checks performed on point 6) and won't show any ranking to him/her. Instead, an error message is reported to the user stating that s/he doesn't have the permissions to access the ranking.
        \\
        \hline

      
    \end{longtable}

  
    
      \begin{longtable}{|p{3cm}p{14cm}|}
      	\multicolumn{2}{l}{\textbf{[UC17] - ShowProfileAndBadges}}\\
        \hline
         Name & ShowProfileAndBadges \\
        \hline
        Actors & User (Student or Educator). \\
        \hline
        Entry Condition & User A is logged in the platform. User B has logged in the platform at least once (to have a profile on the \app system). \\
        \hline
        Event Flow &  
        1 - From the home page of CodeKataBattle, user A clicks on the button to search for user B by username.
        
        2 - \app shows the interface for searching users on the platform.
        
        3 - User A types in the username of B.
        
        4 - \app shows the results of the search by username.
        
        5 - User A clicks on B's profile.
        
        6 - \app displays B's personal profile.
        \\
        \hline
        Exit Condition & User A sees B's profile on the screen and is also able to inspect the badges that B earned. \\
        \hline
        Exceptions &
        1 - User A searches for a username that doesn't exist on the system: \app will return no results from the search, so A is forced to change the username s/he's looking for.
        \\
        \hline
      
      
    \end{longtable}